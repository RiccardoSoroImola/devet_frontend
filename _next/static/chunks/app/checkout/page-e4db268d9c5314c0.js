(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[279],{1471:(e,s,t)=>{Promise.resolve().then(t.bind(t,8754))},5695:(e,s,t)=>{"use strict";var r=t(8999);t.o(r,"useRouter")&&t.d(s,{useRouter:function(){return r.useRouter}})},8754:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>n});var r=t(5155),l=t(2115),a=t(5695);function n(){let e=(0,a.useRouter)(),[s,t]=(0,l.useState)([]),[n,o]=(0,l.useState)(0),[i,c]=(0,l.useState)(!1),[d,m]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=localStorage.getItem("orderData");if(e)try{let s=JSON.parse(e);t(s.items),o(s.total),localStorage.removeItem("orderData")}catch(e){console.error("Errore nel parsing dei dati dell'ordine:",e)}},[]);let u=async()=>{c(!0),m("processing"),setTimeout(()=>{c(!1),m("success")},2e3)},x=()=>{e.push("/")};return(0,r.jsxs)("div",{className:"p-4 max-w-md mx-auto bg-white min-h-screen",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-4 text-center",children:"Riepilogo Ordine"}),0===s.length?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"mb-4",children:"Nessun prodotto nel carrello"}),(0,r.jsx)("button",{onClick:x,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Torna al men\xf9"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"Prodotti ordinati"}),(0,r.jsx)("div",{className:"border rounded-lg overflow-hidden",children:s.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 border-b last:border-b-0",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium",children:e.nome}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantit\xe0: ",e.quantita]})]}),(0,r.jsxs)("p",{className:"font-semibold",children:["€",(e.prezzo*e.quantita).toFixed(2)]})]},e.uuid))})]}),(0,r.jsx)("div",{className:"mb-6 p-3 bg-gray-50 rounded-lg",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-bold text-lg",children:[(0,r.jsx)("span",{children:"Totale"}),(0,r.jsxs)("span",{children:["€",n.toFixed(2)]})]})}),(0,r.jsxs)("div",{className:"flex flex-col gap-3",children:["success"===d?(0,r.jsxs)("div",{className:"text-center py-4",children:[(0,r.jsx)("div",{className:"mb-4 text-green-600 font-semibold",children:"Pagamento completato con successo!"}),(0,r.jsx)("button",{onClick:x,className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Torna al men\xf9"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:u,disabled:i,className:"bg-green-500 text-white px-4 py-3 rounded-lg font-semibold ".concat(i?"opacity-70 cursor-not-allowed":"hover:bg-green-600"),children:i?"Elaborazione in corso...":"Paga con Stripe"}),(0,r.jsx)("button",{onClick:x,className:"border border-gray-300 px-4 py-3 rounded-lg font-semibold hover:bg-gray-50",children:"Torna al men\xf9"})]}),"error"===d&&(0,r.jsx)("div",{className:"text-red-500 text-center mt-2",children:"Si \xe8 verificato un errore durante il pagamento. Riprova."})]})]})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[441,684,358],()=>s(1471)),_N_E=e.O()}]);