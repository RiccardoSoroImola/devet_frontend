(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{205:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(5155),o=t(5753),n=t.n(o);let s={Primo:"\uD83C\uDF5D",Secondo:"\uD83C\uDF56",Contorno:"\uD83E\uDD57",Dolce:"\uD83C\uDF70",Bevanda:"\uD83E\uDD64",Antipasto:"\uD83C\uDF64",Pizza:"\uD83C\uDF55",Pasta:"\uD83C\uDF5D",Carne:"\uD83E\uDD69",Pesce:"\uD83D\uDC1F",Vegetariano:"\uD83E\uDD6C",Vegano:"\uD83C\uDF31"};function c(e){let{categories:a,selectedCategory:t,onSelectCategory:o}=e,c=e=>{t===e?o(null):o(e)};return(0,r.jsx)("div",{className:n().categoryCarousel,children:(0,r.jsx)("div",{className:n().categoryList,children:a.map(e=>(0,r.jsxs)("button",{onClick:()=>c(e),className:"".concat(n().categoryItem," ").concat(t===e?n().active:""),children:[(0,r.jsx)("div",{className:n().categoryIcon,children:(0,r.jsx)("span",{className:n().categoryIconEmoji,children:s[e]||"\uD83C\uDF7D️"})}),(0,r.jsx)("span",{className:n().categoryName,children:e})]},e))})})}},384:e=>{e.exports={searchBar:"SearchBar_searchBar__dtoXA",searchContainer:"SearchBar_searchContainer__yOIEw",searchIcon:"SearchBar_searchIcon__TWZTk",searchInput:"SearchBar_searchInput__It28G",searchButton:"SearchBar_searchButton__B4pOY"}},406:e=>{e.exports={header:"Header_header__xuTiO",headerContent:"Header_headerContent__5WTFE",backButton:"Header_backButton___mxJe",backIcon:"Header_backIcon__0TVLi",title:"Header_title__A5Fyp",placeholder:"Header_placeholder__s7QJ1"}},1176:(e,a,t)=>{Promise.resolve().then(t.bind(t,6013))},5695:(e,a,t)=>{"use strict";var r=t(8999);t.o(r,"usePathname")&&t.d(a,{usePathname:function(){return r.usePathname}}),t.o(r,"useRouter")&&t.d(a,{useRouter:function(){return r.useRouter}}),t.o(r,"useSearchParams")&&t.d(a,{useSearchParams:function(){return r.useSearchParams}})},5753:e=>{e.exports={categoryCarousel:"CategoryCarousel_categoryCarousel__OiXIS",categoryList:"CategoryCarousel_categoryList__0r_bL",categoryItem:"CategoryCarousel_categoryItem__5IncA",categoryIcon:"CategoryCarousel_categoryIcon__ypUXH",active:"CategoryCarousel_active___UT5H",categoryIconEmoji:"CategoryCarousel_categoryIconEmoji__ppKi9",categoryName:"CategoryCarousel_categoryName__hc4Fp"}},6013:(e,a,t)=>{"use strict";t.d(a,{default:()=>m});var r=t(5155),o=t(2115),n=t(5695),s=t(7864),c=t(9230),i=t(205),l=t(9394),d=t(9009);function u(){let e=(0,n.useRouter)(),{readId:a,saveId:t}=function(){let e=(0,n.useSearchParams)(),a=(0,n.useRouter)(),t=(0,n.usePathname)();return{readId:()=>e.get("restaurantId")||e.get("r"),saveId:function(r){let o=!(arguments.length>1)||void 0===arguments[1]||arguments[1],n=new URLSearchParams(e.toString());n.delete("r"),n.set("restaurantId",encodeURIComponent(r));let s="".concat(t,"?").concat(n.toString());o?a.replace(s):a.push(s)},removeId:function(){let r=!(arguments.length>0)||void 0===arguments[0]||arguments[0],o=new URLSearchParams(e.toString());o.delete("restaurantId"),o.delete("r");let n=o.toString()?"".concat(t,"?").concat(o.toString()):t;r?a.replace(n):a.push(n)}}}(),[u,m]=(0,o.useState)(""),[h,p]=(0,o.useState)(null),[_,x]=(0,o.useState)(!1),[v,g]=(0,o.useState)(null),[j,N]=(0,o.useState)({}),[y,f]=(0,o.useState)(null),C=(e,a)=>{N(t=>{let r=Math.max(0,(t[e]||0)+a);return{...t,[e]:r}})},b=async function(e){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e||u;if(r){x(!0),g(null);try{let e="kr5qRiKc007l1UTGTDthkvoLUinNhnIsNjwj005lIkVECnBjsf2911jX9FK50NHs",o=await fetch("https://safe-macaque-83.hasura.app/v1/graphql",{method:"POST",headers:{"Content-Type":"application/json",...e&&{"x-hasura-admin-secret":e}},body:JSON.stringify({query:"\n      query GetMenuItemsByLocale($nomeLocale: String!) {\n        locali(where: {nome_locale: {_eq: $nomeLocale}}) {\n          nome_locale\n          menu {\n            uuid\n            menu_sezioni {\n              uuid\n              nome\n              menu_items {\n                uuid\n                nome\n                tipologia\n                descrizione\n                prezzo\n              }\n            }\n          }\n        }\n      }\n    ",variables:{nomeLocale:r}})}),n=await o.json();n.data&&n.data.locali&&n.data.locali.length>0?(p(n.data),m(r),a||t(r)):(g("Ristorante non trovato. Verifica il nome e riprova."),p(null))}catch(e){console.error(e),g("Errore durante il caricamento del menu")}finally{x(!1)}}};(0,o.useEffect)(()=>{let e=a();e&&b(e,!0)},[]);let k=()=>{if(!h)return 0;let e=0;return h.locali.forEach(a=>a.menu.forEach(a=>a.menu_sezioni.forEach(a=>a.menu_items.forEach(a=>{let t=j[a.uuid]||0;e+=a.prezzo*t})))),e},I=()=>{if(!h)return[];let e=new Set;return y?h.locali.some(e=>e.menu.some(e=>e.menu_sezioni.some(e=>e.menu_items.some(e=>e.tipologia===y))))&&e.add(y):h.locali.forEach(a=>a.menu.forEach(a=>a.menu_sezioni.forEach(a=>a.menu_items.forEach(a=>e.add(a.tipologia))))),Array.from(e)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.A,{title:"Men\xf9",showBackButton:!1}),(0,r.jsxs)("div",{className:"pb-32",style:{backgroundColor:"var(--color-gray-50)",minHeight:"100vh"},children:[(0,r.jsx)("div",{className:"pt-4 pb-2",children:(0,r.jsx)(c.A,{value:u,onChange:m,onSearch:b,placeholder:"Inserisci nome locale",loading:_})}),_&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Caricamento..."})}),v&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-red-500",children:v})}),h&&0===h.locali.length&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Nessun locale trovato."})}),h&&I().length>0&&(0,r.jsx)(i.A,{categories:I(),selectedCategory:y,onSelectCategory:f}),h&&h.locali.map(e=>(0,r.jsxs)("div",{className:"px-4",children:[(0,r.jsx)("h2",{className:"text-xl font-bold mb-4 text-gray-900",children:e.nome_locale}),e.menu.map(e=>(0,r.jsx)("div",{children:e.menu_sezioni.map(e=>(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-3 text-gray-800",children:e.nome}),(0,r.jsx)("div",{className:"flex flex-col gap-3",children:e.menu_items.filter(e=>!y||e.tipologia===y).map(e=>(0,r.jsx)(l.A,{uuid:e.uuid,nome:e.nome,descrizione:e.descrizione,prezzo:e.prezzo,quantity:j[e.uuid]||0,onUpdateQuantity:C},e.uuid))})]},e.uuid))},e.uuid))]},e.nome_locale))]}),h&&k()>0&&(0,r.jsx)("div",{className:"fixed left-0 right-0 bg-white border-t shadow-lg p-4",style:{bottom:"4rem",boxShadow:"0 -2px 10px rgba(0, 0, 0, 0.1)",zIndex:30},children:(0,r.jsxs)("div",{className:"max-w-md mx-auto flex justify-between items-center",children:[(0,r.jsx)("span",{className:"font-semibold text-lg text-gray-900",children:"Totale:"}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("span",{className:"font-bold text-xl",style:{color:"var(--color-secondary)"},children:["€",k().toFixed(2)]}),(0,r.jsx)("button",{onClick:()=>{if(!h||0===k())return;let a=[];h.locali.forEach(e=>e.menu.forEach(e=>e.menu_sezioni.forEach(e=>e.menu_items.forEach(e=>{let t=j[e.uuid]||0;t>0&&a.push({uuid:e.uuid,nome:e.nome,prezzo:e.prezzo,quantita:t})}))));let t={items:a,total:k()};localStorage.setItem("orderData",JSON.stringify(t)),e.push("/checkout")},disabled:0===k(),style:{backgroundColor:"var(--color-secondary)",padding:"0.5rem 1.5rem",borderRadius:"var(--radius-lg)",color:"white",fontWeight:"600",border:"none",cursor:"pointer",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="var(--color-secondary-hover)",onMouseOut:e=>e.currentTarget.style.backgroundColor="var(--color-secondary)",children:"Ordina"})]})]})}),(0,r.jsx)(d.A,{activeTab:"menu"})]})}function m(){return(0,r.jsx)(o.Suspense,{fallback:(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("p",{className:"text-gray-600",children:"Caricamento..."})}),children:(0,r.jsx)(u,{})})}},7864:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(5155),o=t(406),n=t.n(o);function s(e){let{title:a="Men\xf9",onBack:t,showBackButton:o=!1}=e;return(0,r.jsx)("header",{className:n().header,children:(0,r.jsxs)("div",{className:n().headerContent,children:[o?(0,r.jsx)("button",{onClick:t,className:n().backButton,"aria-label":"Indietro",children:(0,r.jsx)("svg",{className:n().backIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}):(0,r.jsx)("div",{className:n().placeholder}),(0,r.jsx)("h1",{className:n().title,children:a}),(0,r.jsx)("div",{className:n().placeholder})]})})}},8252:e=>{e.exports={productCard:"ProductCard_productCard__sBtgy",productImage:"ProductCard_productImage__JfiER",productInfo:"ProductCard_productInfo__szli3",productName:"ProductCard_productName__dvFmK",productDescription:"ProductCard_productDescription__UyRaJ",productPrice:"ProductCard_productPrice__Jz8Ek",productActions:"ProductCard_productActions__RJFql",quantityButton:"ProductCard_quantityButton__mNJJz",increment:"ProductCard_increment__LNRUs",quantity:"ProductCard_quantity__3dzLx"}},8597:e=>{e.exports={bottomNav:"BottomNav_bottomNav__dv_e2",bottomNavContent:"BottomNav_bottomNavContent__2LBUI",navItem:"BottomNav_navItem__W1qpx",active:"BottomNav_active__DH8ny",navIcon:"BottomNav_navIcon__ZStqf",navLabel:"BottomNav_navLabel__7k5Vz"}},9009:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(5155),o=t(8597),n=t.n(o);function s(e){let{activeTab:a="menu",onTabChange:t}=e,o=[{id:"home",label:"Home",icon:(0,r.jsx)("svg",{className:n().navIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})},{id:"menu",label:"Men\xf9",icon:(0,r.jsx)("svg",{className:n().navIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})})},{id:"orders",label:"Ordini",icon:(0,r.jsx)("svg",{className:n().navIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})},{id:"profile",label:"Profilo",icon:(0,r.jsx)("svg",{className:n().navIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}];return(0,r.jsx)("nav",{className:n().bottomNav,children:(0,r.jsx)("div",{className:n().bottomNavContent,children:o.map(e=>(0,r.jsxs)("button",{onClick:()=>null==t?void 0:t(e.id),className:"".concat(n().navItem," ").concat(a===e.id?n().active:""),children:[e.icon,(0,r.jsx)("span",{className:n().navLabel,children:e.label})]},e.id))})})}},9230:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});var r=t(5155),o=t(384),n=t.n(o);function s(e){let{value:a,onChange:t,onSearch:o,placeholder:s="Cerca un piatto o una categoria",loading:c=!1}=e;return(0,r.jsx)("div",{className:n().searchBar,children:(0,r.jsxs)("div",{className:n().searchContainer,children:[(0,r.jsx)("svg",{className:n().searchIcon,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,r.jsx)("input",{type:"text",className:n().searchInput,placeholder:s,value:a,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"===e.key&&o()}}),(0,r.jsx)("button",{onClick:o,className:n().searchButton,disabled:c,children:c?"...":"Cerca"})]})})}},9394:(e,a,t)=>{"use strict";t.d(a,{A:()=>c});var r=t(5155),o=t(6766),n=t(8252),s=t.n(n);function c(e){let{uuid:a,nome:t,descrizione:n,prezzo:c,quantity:i,onUpdateQuantity:l,imageUrl:d="https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Meet_Truffle%21.jpg/800px-Meet_Truffle%21.jpg"}=e;return(0,r.jsxs)("div",{className:s().productCard,children:[(0,r.jsx)(o.default,{src:d,alt:t,width:80,height:80,className:s().productImage}),(0,r.jsxs)("div",{className:s().productInfo,children:[(0,r.jsx)("h3",{className:s().productName,children:t}),(0,r.jsx)("p",{className:s().productDescription,children:n}),(0,r.jsxs)("p",{className:s().productPrice,children:["€",c.toFixed(2)]})]}),(0,r.jsxs)("div",{className:s().productActions,children:[(0,r.jsx)("button",{onClick:()=>l(a,-1),className:s().quantityButton,disabled:0===i,"aria-label":"Rimuovi",children:"−"}),(0,r.jsx)("span",{className:s().quantity,children:i}),(0,r.jsx)("button",{onClick:()=>l(a,1),className:"".concat(s().quantityButton," ").concat(s().increment),"aria-label":"Aggiungi",children:"+"})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[867,766,441,684,358],()=>a(1176)),_N_E=e.O()}]);